<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DS1 - Activity Log</title>
    <link rel="stylesheet" href="css/bulma.css">
    <link rel="stylesheet" href="css/overrides.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .log-details pre {
            background-color: #f5f5f5;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            max-height: 150px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <nav id="sidebar-container"></nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="level mb-5">
            <div class="level-left">
                <div class="level-item">
                    <div>
                        <h1 class="title is-3">System Activity</h1>
                        <p class="subtitle is-6 has-text-grey">Comprehensive log of all system events</p>
                    </div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <button class="button is-primary" onclick="refreshLogs()">
                        <span class="icon"><i class="fas fa-sync"></i></span>
                        <span>Refresh</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="columns mb-5">
            <div class="column">
                <div class="box has-text-centered">
                    <p class="heading">Total Events</p>
                    <p class="title" id="stat-total">0</p>
                </div>
            </div>
            <div class="column">
                <div class="box has-text-centered">
                    <p class="heading">Errors</p>
                    <p class="title has-text-danger" id="stat-errors">0</p>
                </div>
            </div>
            <div class="column">
                <div class="box has-text-centered">
                    <p class="heading">Active Agents</p>
                    <p class="title has-text-info" id="stat-agents">0</p>
                </div>
            </div>
            <div class="column">
                <div class="box has-text-centered">
                    <p class="heading">Last 24h</p>
                    <p class="title has-text-success" id="stat-recent">0</p>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="box mb-5">
            <div class="columns is-multiline">
                <div class="column is-one-quarter">
                    <div class="field">
                        <label class="label">Agent</label>
                        <div class="control">
                            <div class="select is-fullwidth">
                                <select id="filter-agent">
                                    <option value="">All Agents</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-one-quarter">
                    <div class="field">
                        <label class="label">Level</label>
                        <div class="control">
                            <div class="select is-fullwidth">
                                <select id="filter-level">
                                    <option value="">All Levels</option>
                                    <option value="info">Info</option>
                                    <option value="warn">Warning</option>
                                    <option value="error">Error</option>
                                    <option value="debug">Debug</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-one-quarter">
                    <div class="field">
                        <label class="label">Search</label>
                        <div class="control">
                            <input class="input" type="text" id="filter-search" placeholder="Search messages...">
                        </div>
                    </div>
                </div>
                <div class="column is-one-quarter">
                    <div class="field">
                        <label class="label">&nbsp;</label>
                        <div class="control">
                            <button class="button is-info is-fullwidth" onclick="applyFilters()">Apply Filters</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Table -->
        <div class="card">
            <div class="card-content">
                <div class="table-container">
                    <table class="table is-fullwidth is-striped is-hoverable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Level</th>
                                <th>Agent</th>
                                <th>Message</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody id="log-container">
                            <tr><td colspan="5" class="has-text-centered">Loading logs...</td></tr>
                        </tbody>
                    </table>
                </div>
                <nav class="pagination is-centered" role="navigation" aria-label="pagination">
                    <a class="pagination-previous" onclick="prevPage()">Previous</a>
                    <a class="pagination-next" onclick="nextPage()">Next</a>
                    <ul class="pagination-list">
                        <li><span class="pagination-link is-current" id="page-indicator">1</span></li>
                    </ul>
                </nav>
            </div>
        </div>
    </main>

    <script src="activity.js"></script>
    <script src="sidebar.js"></script>
    <script>
        // Initialize sidebar if available
        if (window.initSidebar) window.initSidebar();
    </script>
</body>
</html>
